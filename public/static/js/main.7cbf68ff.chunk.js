(this.webpackJsonpbook_store=this.webpackJsonpbook_store||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(18),r=n.n(a),s=n(5),i=n(13),o=n(28),l=n(11),u=n(3),d=(n(38),n(12)),b=n.n(d),j=n(15),m=n(7),h=(n(40),n(0)),O=function(e){var t=e.book,n=e.delete;return Object(h.jsxs)("div",{className:"".concat(t.visible?"book-panel d-flex flex-column flex-md-row":"d-none"),children:[Object(h.jsxs)("div",{className:"book-info",children:[Object(h.jsx)("div",{className:"book-category",children:t.category}),Object(h.jsx)("div",{className:"book-title",children:t.title}),Object(h.jsx)("div",{className:"book-id",children:"Book ID: ".concat(t.id)}),Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsx)("span",{className:"first",children:"Comments"}),Object(h.jsx)("a",{href:"/#",onClick:function(){return n(t)},children:"Remove"}),Object(h.jsx)("span",{className:"last",children:"Edit"})]})]}),Object(h.jsxs)("div",{className:"book-info position-relative",children:[Object(h.jsx)("i",{className:"Oval-2 d-none d-md-flex"}),Object(h.jsx)("span",{className:"percentage",children:"64%"}),Object(h.jsx)("span",{className:"completed",children:"Completed"})]}),Object(h.jsxs)("div",{className:"col d-flex flex-column",children:[Object(h.jsx)("span",{className:"completed",children:"CURRENT CHAPTER"}),Object(h.jsx)("span",{className:"chapter",children:"Chapter 17"}),Object(h.jsx)("button",{type:"button",className:"btn btn-update mt-3",onClick:function(){return n(t)},children:"Update Progress"})]})]})},f="https://marcelomaidden-book-store-cms.herokuapp.com/",p="CREATE_BOOK",x="REMOVE_BOOK",v="CHANGE_FILTER",g="CHANGE_VISIBILITY",k="SET_CREDENTIALS",y="GET_CREDENTIALS",N="SIGN_OUT",C=Object(s.b)((function(e){return{books:e.books}}),(function(e){return{delete:function(t){return e(function(e){return{type:x,book:e}}(t))}}}))((function(e){var t=e.books,n=e.delete;return Object(h.jsx)("div",{children:t.map((function(e){return Object(h.jsx)(O,{book:e,delete:n},e.id)}))})})),w=n(4),E=[{key:0,name:"Action"},{key:1,name:"Biography"},{key:2,name:"History"},{key:3,name:"Horror"},{key:4,name:"Kids"},{key:5,name:"Learning"},{key:6,name:"Sci-Fi"}],S=function(e){var t=e.handleFilter;return Object(h.jsxs)("label",{htmlFor:"filterCategories",className:"form-label d-flex",children:["CATEGORIES\xa0",Object(h.jsxs)("select",{name:"filterCategories",onChange:t,id:"filterCategories",className:"form-select filter-categories",children:[Object(h.jsx)("option",{value:"All",children:"All"}),E.map((function(e){return Object(h.jsx)("option",{value:e.name,children:e.name},e.key)}))]})]})},T=(n(42),Object(s.b)(null,(function(e){return{create:function(t){return e(function(e){return{type:p,book:e}}(t))}}}))((function(e){var t=e.create,n=Object(c.useState)({title:"",category:""}),a=Object(m.a)(n,2),r=a[0],s=a[1],i=function(e){"inputTitle"===e.target.id?s(Object(w.a)(Object(w.a)({},r),{},{title:e.target.value,invalid:!1})):s(Object(w.a)(Object(w.a)({},r),{},{category:e.target.value}))};return Object(h.jsxs)("form",{className:"row g-3 form-book",children:[Object(h.jsx)("h1",{className:"add-book col-12",children:"ADD NEW BOOK"}),Object(h.jsx)("div",{className:"col-md-6",children:Object(h.jsx)("input",{type:"text",placeholder:"Enter the book title",onChange:i,value:r.title,className:"form-control ".concat(r.invalid?"is-invalid":""),id:"inputTitle"})}),Object(h.jsx)("div",{className:"col-md-3",children:Object(h.jsx)("select",{name:"category",onChange:i,className:"form-select",id:"category",children:E.map((function(e){var t=e.key,n=e.name;return Object(h.jsx)("option",{value:n,children:n},t)}))})}),Object(h.jsx)("div",{className:"col-md-1",children:Object(h.jsx)("button",{type:"button",onClick:function(){""===r.title?s(Object(w.a)(Object(w.a)({},r),{},{invalid:!0})):(t(r),s({title:"",category:"",invalid:!1}))},className:"btn btn-create",children:"Create book"})})]})}))),F=Object(s.b)((function(e){return{credentials:e.credentials}}),(function(e){return{check:function(t){return e(function(e){return function(t){fetch("".concat(f,"check_credentials"),{method:"post",mode:"cors",headers:{"Content-type":"application/json;charset=UTF-8"},body:JSON.stringify({token:e})}).then((function(e){return e.json()})).then((function(e){"Invalid credentials"===e.token?t({type:k,data:{token:e.token,user:""}}):t({type:y})}))}}(t))}}}))((function(e){var t=e.credentials,n=e.check,a=Object(c.useState)(t.token),r=Object(m.a)(a,2),s=r[0],i=r[1],o=Object(u.f)();return Object(c.useEffect)((function(){Object(j.a)(b.a.mark((function e(){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(t.token),e.next=3,t;case 3:c=e.sent,i("Checking credentials"),setTimeout((function(){"Invalid credentials"===c.token&&i("Invalid credentials")}),3e3),i(c.token);case 7:case"end":return e.stop()}}),e)})))()}),[t.token]),Object(h.jsx)("div",{className:"App",children:"Invalid credentials"===s||""===s?o.push("/login"):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(C,{}),Object(h.jsx)(T,{})]})})})),I=(n(44),Object(s.b)((function(e){return{credentials:e.credentials}}),(function(e){return{handleChangeFilter:function(t){return e({type:v,filter:t})},handleVisibility:function(t){return e({type:g,filter:t})},signOut:function(){return e({type:N})}}}))((function(e){var t=e.credentials,n=e.signOut,c=e.handleChangeFilter,a=e.handleVisibility;return Object(h.jsxs)("nav",{className:"d-flex flex-column flex-md-row justify-content-between",children:[Object(h.jsxs)("div",{className:"nav-links d-flex flex-column flex-md-row",children:[Object(h.jsx)("h1",{className:"title",children:Object(h.jsx)(l.b,{to:"/",children:"BookStore CMS"})}),Object(h.jsx)("h2",{className:"books",children:Object(h.jsx)(l.b,{to:"/books",children:"BOOKS"})}),Object(h.jsx)("h2",{className:"categories",children:Object(h.jsx)(S,{handleFilter:function(e){c(e.target.value),a(e.target.value)}})})]}),Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsx)("div",{className:"login",children:Object(h.jsx)(l.b,{to:"".concat(""===t.user||void 0===t.user?"/login":"/"),className:"fa fa-user-circle"})}),Object(h.jsxs)("div",{className:"d-flex flex-column",children:["".concat(""===t.user||void 0===t.user?"":t.user.name),""!==t.user&&void 0!==t.user?Object(h.jsx)(l.b,{to:"/signout",onClick:n,children:"Sign out"}):""]})]})]})}))),A=Object(s.b)((function(e){return{credentials:e.credentials}}),(function(e){return{login:function(t,n){return e(function(e,t){return function(n){n({type:y});var c={email:e,password:t};return c=JSON.stringify(c),fetch("".concat(f,"sign_in"),{method:"post",mode:"cors",headers:{"Content-type":"application/json;charset=UTF-8"},body:c}).then((function(e){return e.json()})).then((function(e){n({type:k,data:{token:e.token,user:e.user}})}))}}(t,n))}}}))((function(e){var t=e.credentials,n=e.login,a=Object(c.useState)(""),r=Object(m.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),d=Object(m.a)(o,2),O=d[0],f=d[1],p=Object(c.useState)(""),x=Object(m.a)(p,2),v=x[0],g=x[1],k=Object(u.f)(),y=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(s,O),g("Checking credentials"),setTimeout((function(){"Invalid credentials"===t.token?g("Invalid credentials"):k.push("/")}),1e3);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{className:"mx-auto w-50",children:v}),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"input-group mb-3 w-50 mx-auto",children:[Object(h.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"@"}),Object(h.jsx)("input",{type:"email",name:"username",onChange:function(e){i(e.target.value)},className:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(h.jsxs)("div",{className:"input-group mb-3 mx-auto w-50",children:[Object(h.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(h.jsx)("i",{className:"fa fa-user-circle"})}),Object(h.jsx)("input",{type:"password",name:"password",onChange:function(e){f(e.target.value)},onBlur:function(e){return f(e.target.value)},className:"form-control",placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon1"})]}),Object(h.jsx)("div",{className:"m-0 w-50 mx-auto",children:Object(h.jsx)("button",{type:"button",onClick:y,className:"btn-create w-100 btn btn-outline-secondary",children:"Enter"})}),Object(h.jsxs)("div",{className:"w-50 mx-auto",children:["or ",Object(h.jsx)(l.b,{to:"/signup",children:"Create an account"})]})]})]})})),B=Object(s.b)((function(e){return{credentials:e.credentials}}),(function(e){return{create:function(t,n,c){return e(function(e,t,n){return function(c){var a={user:{name:e,email:t,password:n}};return a=JSON.stringify(a),fetch("".concat(f,"users"),{method:"post",mode:"cors",headers:{"Content-type":"application/json;charset=UTF-8"},body:a}).then((function(e){return e.json()})).then((function(e){"User not created"===e.token&&c({type:k,data:{token:e.token,user:""}}),c({type:k,data:{token:e.token,user:e.user}})}))}}(t,n,c))}}}))((function(e){var t=e.create,n=e.credentials,a=Object(c.useState)(""),r=Object(m.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(m.a)(o,2),d=l[0],O=l[1],f=Object(c.useState)(""),p=Object(m.a)(f,2),x=p[0],v=p[1],g=Object(c.useState)(""),k=Object(m.a)(g,2),y=k[0],N=k[1],C=Object(u.f)(),w=function(){var e=Object(j.a)(b.a.mark((function e(){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s,d,x),e.next=3,n;case 3:c=e.sent,N("Creating user"),setTimeout((function(){"User not created"===c.token?N("An error ocurred, try again later"):C.push("/")}),1e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{className:"mx-auto w-50",children:y}),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"input-group mb-3 w-50 mx-auto",children:[Object(h.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"@"}),Object(h.jsx)("input",{type:"text",name:"name",onChange:function(e){i(e.target.value)},className:"form-control",placeholder:"Enter your name","aria-label":"User name","aria-describedby":"basic-addon1"})]}),Object(h.jsxs)("div",{className:"input-group mb-3 w-50 mx-auto",children:[Object(h.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"@"}),Object(h.jsx)("input",{type:"email",name:"email",onChange:function(e){O(e.target.value)},className:"form-control",placeholder:"user@email.com","aria-label":"E-mail","aria-describedby":"basic-addon1"})]}),Object(h.jsxs)("div",{className:"input-group mb-3 mx-auto w-50",children:[Object(h.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(h.jsx)("i",{className:"fa fa-user-circle"})}),Object(h.jsx)("input",{type:"password",name:"password",onChange:function(e){v(e.target.value)},onBlur:function(e){return v(e.target.value)},className:"form-control",placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon1"})]}),Object(h.jsx)("div",{className:"m-0 w-50 mx-auto",children:Object(h.jsx)("button",{type:"button",onClick:w,className:"btn-create w-100 btn btn-outline-secondary",children:"Enter"})})]})]})})),U=n(29),_=function(e,t){var n=Math.ceil(e),c=Math.floor(t);return Math.floor(Math.random()*(c-n+1))+n},R=[{id:_(1,1e3),title:"Star Wars",category:"Sci-Fi",visible:!0},{id:_(1,1e3),title:"Alien",category:"Sci-Fi",visible:!0},{id:_(1,1e3),title:"Freddie Krugger",category:"Horror",visible:!0}],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return[].concat(Object(U.a)(e),[{id:_(1,1e3),title:t.book.title,category:t.book.category,visible:!0}]);case x:return e.filter((function(e){return e.id!==t.book.id}));case g:return e.map((function(e){return"All"===t.filter?Object(w.a)(Object(w.a)({},e),{},{visible:!0}):e.category!==t.filter?Object(w.a)(Object(w.a)({},e),{},{visible:!1}):Object(w.a)(Object(w.a)({},e),{},{visible:!0})}));default:return e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.filter;default:return e}},K={token:"",user:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return e;case k:return Object(w.a)(Object(w.a)({},e),{},{token:t.data.token,user:t.data.user});case N:return K;default:return e}},P=Object(i.c)({books:L,filter:H,credentials:M}),D=Object(i.d)(P,Object(i.a)(o.a));r.a.render(Object(h.jsx)(s.a,{store:D,children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{path:"/",component:F,exact:!0}),Object(h.jsx)(u.a,{path:"/books",component:F}),Object(h.jsx)(u.a,{path:"/categories",component:F}),Object(h.jsx)(u.a,{path:"/login",component:A}),Object(h.jsx)(u.a,{path:"/signup",component:B}),Object(h.jsx)(u.a,{path:"/signout",component:A})]})]})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.7cbf68ff.chunk.js.map